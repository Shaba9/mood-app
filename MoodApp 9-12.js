
var questions = [	
	{
		"Q": "How many hours of sleep did you get last night?",
		"Ops":	[
				{
					"text": "More than 8",
					"Happy": 9,
					"Humorous": 4,
					"Playful": 4
				},
				{
					
					"text": "5-8 hours",
					"Alarmed": 2,
					"Angry": 1,
					"Annoyed": 6,
					"Confused": 3,
					"Dead": 2,
					"Happy": 6,
					"Sad": 2,
					"Skeptical": 1,
					"Sleepy": 5
				},
				{
					"text": "Less than 5 hours",
					"Alarmed": 5,
					"Angry": 5,
					"Annoyed": 7,
					"Confused": 3,
					"Dead": 8,
					"Sad": 5,
					"Skeptical": 3,
					"Sleepy": 9
				}
			]
	},
	
	{
		"Q": "When was the last time you ate?",
		"Ops":	[
				{
					"text": "Just nowish",
					"Happy": 8,
					"Humorous": 5,
					"Nerdy": 2,
					"Playful": 5,
					"Sleepy": 3
				},
				{
					"text": "1-3 hours ago",
					"Alarmed": 1,
					"Happy": 5,
					"Humorous": 2,
					"Hungry": 4,
					"Playful": 2
				},
				{
					"text": "4-6 hours ago",
					"Alarmed": 4,
					"Angry": 4,
					"Annoyed": 5,
					"Confused": 3,
					"Dead": 2,
					"Hungry": 7,
					"Sad": 4,
					"Skeptical": 5,
					"Sleepy": 5
				},
				{
					"text": "I have not eaten all day!",
					"Alarmed": 6,
					"Angry": 6,
					"Annoyed": 7,
					"Confused": 6,
					"Dead": 7,
					"Hungry": 10,
					"Sad": 5,
					"Skeptical": 5,
					"Sleepy": 8
				}
			]
	},

	{
		"Q": "How healthy was your food on average today?",
		"Ops":	[
				{
					"text": "Very healthy",
					"Happy": 8,
					"Humorous": 6,
					"Hungry": 5,
					"Nerdy": 7,
					"Playful": 5
				},
				{
					"text": "Somewhat healthy",
					"Happy": 7,
					"Humorous": 3,
					"Hungry": 3,
					"Nerdy": 3,
					"Playful": 3,
					"Sleepy": 3
				},
				{
					"text": "A bit high in fat and calories",
					"Alarmed": 2,
					"Annoyed": 3,
					"Confused": 2,
					"Dead": 1,
					"Happy": 5,
					"Humorous": 5,
					"Playful": 4,
					"Sad": 3,
					"Sleepy": 6
				},
				{
					"text": "Pure junk!",
					"Alarmed": 4,
					"Angry": 4,
					"Annoyed": 5,
					"Confused": 3,
					"Dead": 4,
					"Happy": 3,
					"Humorous": 2,
					"Hungry": 4,
					"Playful": 2,
					"Sad": 4,
					"Skeptical": 5,
					"Sleepy": 6
				}
			]
	},

	{
		"Q": "How many hours of work did you do today?",
		"Ops":	[
				{
					"text": "More than 9 hours",
					"Alarmed": 6,
					"Angry": 3,
					"Annoyed": 6,
					"Confused": 5,
					"Dead": 7,
					"Happy": 3,
					"Humorous": 4,
					"Hungry": 3,
					"Nerdy": 6,
					"Playful": 3,
					"Sad": 4,
					"Skeptical": 2,
					"Sleepy": 6
				},
				{
					"text": "Between 5-9 hours",
					"Alarmed": 5,
					"Angry": 2,
					"Annoyed": 4,
					"Confused": 3,
					"Dead": 5,
					"Happy": 4,
					"Humorous": 4,
					"Hungry": 3,
					"Nerdy": 5,
					"Playful": 1,
					"Sad": 3,
					"Skeptical": 1,
					"Sleepy": 5
				},
				{
					"text": "Between 1-4 hours",
					"Confused": 2,
					"Happy": 6,
					"Humorous": 5,
					"Nerdy": 1,
					"Playful": 5
				},
				{
					"text": "I lounged around the house all day...",
					"Alarmed": 3,
					"Annoyed": 3,
					"Confused": 2,
					"Happy": 6,
					"Humorous": 4,
					"Mysterious": 3,
					"Playful": 1,
					"Sad": 5,
					"Skeptical": 5,
					"Sleepy": 3
				}
			]
	},

	{
		"Q": "How physically active is your work?",
		"Ops":	[
				{
					"text": "Quite laborious",
					"Alarmed": 2,
					"Angry": 1,
					"Annoyed": 4,
					"Confused": 4,
					"Dead": 7,
					"Happy": 4,
					"Humorous": 3,
					"Hungry": 7,
					"Mysterious": 2,
					"Skeptical": 4,
					"Sleepy": 7
				},
				{
					"text": "I get a lot of movement, but not labor-heavy",
					"Alarmed": 3,
					"Annoyed": 4,
					"Confused": 4,
					"Dead": 5,
					"Happy": 5,
					"Humorous": 6,
					"Hungry": 6,
					"Mysterious": 2,
					"Nerdy": 2,
					"Playful": 3,
					"Skeptical": 3,
					"Sleepy": 5
				},
				{
					"text": "I get some movement",
					"Alarmed": 2,
					"Annoyed": 1,
					"Confused": 1,
					"Dead": 1,
					"Happy": 4,
					"Humorous": 4,
					"Hungry": 4,
					"Mysterious": 5,
					"Nerdy": 3,
					"Playful": 4,
					"Skeptical": 1,
					"Sleepy": 2
				},
				{
					"text": "I sit at a desk!",
					"Alarmed": 4,
					"Angry": 4,
					"Annoyed": 4,
					"Confused": 3,
					"Dead": 2,
					"Happy": 1,
					"Humorous": 2,
					"Hungry": 1,
					"Mysterious": 3,
					"Nerdy": 6,
					"Playful": 3,
					"Sad": 5,
					"Skeptical": 6,
					"Sleepy": 5
				}
			]
	},

	{
		"Q": "How mentally stimulating is your work?",
		"Ops":	[
				{
					"text": "Too stimulating. My brain hurts!",
					"Alarmed": 5,
					"Angry": 4,
					"Annoyed": 5,
					"Confused": 7,
					"Dead": 5,
					"Happy": 4,
					"Humorous": 2,
					"Hungry": 3,
					"Mysterious": 4,
					"Nerdy": 9,
					"Playful": 4,
					"Sad": 6,
					"Skeptical": 5,
					"Sleepy": 7
				},
				{
					"text": "Some mental stimulation happens",
					"Alarmed": 4,
					"Annoyed": 2,
					"Confused": 2,
					"Dead": 3,
					"Happy": 7,
					"Humorous": 6,
					"Hungry": 2,
					"Mysterious": 6,
					"Nerdy": 7,
					"Playful": 6,
					"Sad": 2,
					"Skeptical": 3,
					"Sleepy": 4
				},
				{
					"text": "There are rare instances when I have to think",
					"Alarmed": 4,
					"Angry": 5,
					"Annoyed": 5,
					"Confused": 6,
					"Dead": 1,
					"Happy": 2,
					"Humorous": 1,
					"Hungry": 2,
					"Mysterious": 2,
					"Nerdy": 1,
					"Playful": 1,
					"Sad": 5,
					"Skeptical": 3,
					"Sleepy": 1
				},
				{
					"text": "I do mindless work",
					"Alarmed": 6,
					"Angry": 5,
					"Annoyed": 6,
					"Confused": 6,
					"Dead": 5,
					"Humorous": 2,
					"Hungry": 1,
					"Mysterious": 1,
					"Playful": 5,
					"Sad": 7,
					"Skeptical": 6,
					"Sleepy": 3
				}
			]
	},

	{
		"Q": "How much interaction with others did you have today?",
		"Ops":	[
				{
					"text": "I had a good, long conversation with at least one person",
					"Alarmed": 2,
					"Confused": 5,
					"Happy": 9,
					"Humorous": 7,
					"Hungry": 2,
					"Mysterious": 6,
					"Nerdy": 6,
					"Playful": 6,
					"Skeptical": 1,
					"Sleepy": 1
				},
				{
					"text": "I engaged in some basic dialogue with a few people",
					"Alarmed": 4,
					"Angry": 2,
					"Annoyed": 5,
					"Confused": 4,
					"Dead": 3,
					"Happy": 2,
					"Humorous": 2,
					"Hungry": 4,
					"Mysterious": 3,
					"Nerdy": 3,
					"Playful": 4,
					"Sad": 5,
					"Skeptical": 4,
					"Sleepy": 2
				},
				{
					"text": "It was only me all day",
					"Alarmed": 6,
					"Angry": 7,
					"Annoyed": 5,
					"Confused": 6,
					"Dead": 5,
					"Happy": 1,
					"Mysterious": 3,
					"Sad": 7,
					"Skeptical": 5,
					"Sleepy": 4
				}
			]
	},

	{
		"Q": "How much solitude time did you have today?",
		"Ops":	[
				{
					"text": "At least 1-2 hours",
					"Alarmed": 1,
					"Confused": 4,
					"Happy": 7,
					"Humorous": 6,
					"Hungry": 2,
					"Mysterious": 7,
					"Nerdy": 5,
					"Playful": 4,
					"Sad": 4,
					"Skeptical": 3,
					"Sleepy": 2
				},
				{
					"text": "Like 20 minutes to an hour",
					"Alarmed": 4,
					"Angry": 2,
					"Annoyed": 4,
					"Confused": 4,
					"Dead": 2,
					"Happy": 5,
					"Humorous": 3,
					"Hungry": 2,
					"Mysterious": 5,
					"Nerdy": 3,
					"Playful": 3,
					"Sad": 4,
					"Skeptical":3,
					"Sleepy": 2
				},
				{
					"text": "None at all!",
					"Alarmed": 9,
					"Angry": 6,
					"Annoyed": 7,
					"Confused": 7,
					"Dead": 5,
					"Sad": 7,
					"Skeptical": 6,
					"Sleepy": 4
				}
			]
	},

	{
		"Q": "Did you listen to the news today?",
		"Ops":	[
				{
					"text": "Yes, I've been getting updates all day long",
					"Alarmed": 8,
					"Angry": 8,
					"Annoyed": 8,
					"Confused": 7,
					"Dead": 6,
					"Happy": 1,
					"Humorous": 2,
					"Nerdy": 3,
					"Sad": 8,
					"Skeptical": 8
				},
				{
					"text": "I scanned through the happenings...",
					"Alarmed":7,
					"Angry": 6,
					"Annoyed": 6,
					"Confused": 6,
					"Dead": 3,
					"Happy": 1,
					"Humorous": 2,
					"Mysterious": 3,
					"Nerdy": 2,
					"Playful": 1,
					"Sad": 7,
					"Skeptical": 5,
					"Sleepy": 1
				},
				{
					"text": "I have shunned the news today!",
					"Alarmed": 5,
					"Angry": 6,
					"Annoyed": 7,
					"Confused": 9,
					"Dead": 3,
					"Happy": 1,
					"Humorous": 3,
					"Mysterious": 2,
					"Nerdy": 1,
					"Playful": 4,
					"Sad": 5,
					"Skeptical": 7,
					"Sleepy": 3
				}
			]
	},

	{
		"Q": "How much time did you spend on social media today?",
		"Ops":	[
				{
					"text": "More than 5 hours; I have a problem!",
					"Alarmed": 8,
					"Angry": 7,
					"Annoyed": 7,
					"Confused": 6,
					"Dead": 5,
					"Happy": 1,
					"Humorous": 4,
					"Nerdy": 3,
					"Playful": 4,
					"Sad": 7,
					"Skeptical": 6
				},
				{
					"text": "3-4 hours; I should think of cutting down...",
					"Alarmed": 7,
					"Angry": 5,
					"Annoyed": 6,
					"Confused": 5,
					"Dead": 5,
					"Happy": 2,
					"Humorous": 4,
					"Nerdy": 4,
					"Playful": 3,
					"Sad": 7,
					"Skeptical": 6,
					"Sleepy": 1
				},
				{
					"text": "1-2 hours",
					"Alarmed": 5,
					"Angry": 3,
					"Annoyed": 4,
					"Confused": 4,
					"Dead": 2,
					"Happy": 1,
					"Humorous": 4,
					"Nerdy": 3,
					"Playful": 4,
					"Sad": 5,
					"Skeptical": 5,
					"Sleepy": 2
				},
				{
					"text": "I have shunned social media today!",
					"Alarmed": 6,
					"Angry": 5,
					"Annoyed": 7,
					"Confused": 6,
					"Dead": 5,
					"Happy": 3,
					"Humorous": 4,
					"Mysterious": 4,
					"Playful": 4,
					"Sad": 6,
					"Skeptical": 7,
					"Sleepy": 3
				}
			]
	},
	{
		"Q": "Did you do activities outside of work today?",
		"Ops":	[
				{
					"text": "Yes, I spent a significant time on another activity",
					"Happy": 8,
					"Humorous": 6,
					"Hungry": 3,
					"Mysterious": 6,
					"Nerdy": 7,
					"Playful": 5,
					"Sleepy": 5
				},
				{
					"text": "I started to, then got distracted and stopped",
					"Alarmed": 4,
					"Angry": 5,
					"Annoyed": 6,
					"Confused": 6,
					"Happy": 5,
					"Humorous": 5,
					"Mysterious": 5,
					"Nerdy": 5,
					"Playful": 4,
					"Sad": 5,
					"Skeptical": 3,
					"Sleepy": 3
				},
				{
					"text": "I contemplated it, but decided not to",
					"Alarmed": 7,
					"Angry": 7,
					"Annoyed": 7,
					"Confused": 6,
					"Happy": 2,
					"Humorous": 1,
					"Hungry": 2,
					"Mysterious": 4,
					"Nerdy": 1,
					"Playful": 3,
					"Sad": 7,
					"Skeptical": 4,
					"Sleepy": 3
				},
				{
					"text": "I have no activities outside of work",
					"Alarmed": 5,
					"Angry": 6,
					"Annoyed": 6,
					"Confused": 6,
					"Dead": 1,
					"Happy": 1,
					"Humorous": 4,
					"Mysterious": 3,
					"Sad": 9,
					"Skeptical": 5,
					"Sleepy": 1
				}
			]
	},

	{
		"Q": "What do you think about the current state of society?",
		"Ops":	[
				{
					"text": "The world is great and everything is perfect!",
					"Alarmed": 5,
					"Confused": 5,
					"Happy": 8,
					"Humorous": 5,
					"Mysterious": 5,
					"Nerdy": 3,
					"Playful": 5
				},
				{
					"text": "The world has its beauty and wonder, but bad things happen sometimes too; there is a reason for everything",
					"Happy": 7,
					"Humorous": 7,
					"Mysterious": 7,
					"Nerdy": 3,
					"Playful": 6,
					"Sad": 5,
					"Skeptical": 3,
					"Sleepy": 2
				},
				{
					"text": "The world is a terrible and evil place",
					"Alarmed": 7,
					"Angry": 9,
					"Annoyed": 9,
					"Confused": 8,
					"Dead": 6,
					"Humorous": 5,
					"Hungry": 5,
					"Sad": 8,
					"Skeptical": 8,
					"Sleepy": 5
				},
				{
					"text": "Everything is a conspiracy",
					"Alarmed": 7,
					"Angry": 8,
					"Annoyed": 8,
					"Confused": 9,
					"Dead": 7,
					"Hungry": 5,
					"Sad": 8,
					"Skeptical": 10,
					"Sleepy": 6
				}
			]
	}
];

var emoSource = {
	"Alarmed": "Emojis/Alarmed.png",
	"Angry": "Emojis/Angry.png",
	"Annoyed": "Emojis/Annoyed.png",
	"Confused": "Emojis/Confused.png",
	"Dead": "Emojis/Dead.png",
	"Happy": "Emojis/Happy.png",
	"Humorous": "Emojis/Humorous.png",
	"Hungry": "Emojis/Hungry.png",
	"Mysterious": "Emojis/Mysterious.png",
	"Nerdy": "Emojis/Nerdy.png",
	"Playful": "Emojis/Playful.png",
	"Sad": "Emojis/Sad.png",
	"Skeptical": "Emojis/Skeptical.png",
	"Sleepy": "Emojis/Sleepy.png"
};

var emoLog = {
	"Alarmed": 0,
	"Angry": 0,
	"Annoyed": 0,
	"Confused": 0,
	"Dead": 0,
	"Happy": 0,
	"Humorous": 0,
	"Hungry": 0,
	"Mysterious": 0,
	"Nerdy": 0,
	"Playful": 0,
	"Sad": 0,
	"Skeptical": 0,
	"Sleepy": 0
};
var i = 0;
var btn = document.getElementsByTagName("button")[1];
var back;
var answerLog = [];
var clickCount = 0;
const body = document.getElementsByTagName("body")[0];

function changeButton(element, newId, text) {
    element.id = newId;
	element.textContent = text;
	if(document.querySelector('.selected') == null){
		element.disabled = true;
	};
    return element;
};

function revealO(i){
	var options = "<ul id = 'ops'>";
	btn.disabled = true;
	document.getElementById("question").innerHTML = questions[i].Q;
        for (var j = 0; j < questions[i].Ops.length; j++){
			if(i < answerLog.length && answerLog[i] == j){
				options += "<li class='selected' onClick=sel(" + j + ")>" + questions[i].Ops[j].text + "</li>";
				btn.disabled = false;
			} else{
				options += "<li onClick=sel(" + j + ")>" + questions[i].Ops[j].text + "</li>";
			};
		};
		options += "</ul>";
		document.getElementById("answer").innerHTML = options;
};

function revealQ(i) {
    if (i > 0){
		back.disabled = false;
		revealO(i);
    } else if (i == 0){
        back.disabled = true;
        revealO(i);
    } else {
        back.disabled = true;
    };
};

function sel(k) {
	var selected = document.querySelector(".selected");
	if(selected !== null){
		selected.classList.remove("selected");
	};
	btn.disabled = false;
	ops.className = 'answered';
	document.querySelectorAll("#ops li")[k].className = "selected";
	answerLog[i] = k;
	console.log(answerLog);
};

function maxPlace(arr) {
	var maxP = 0;
	for(var r = 0; r < arr.length; r++){
		if(arr[r + 1] >= arr[maxP]){
			maxP = r+1;
		};
	};
	return maxP;
};

function Reset() {
	var keys = Object.keys(emoLog);
	for(var l = 0; l < keys.length; l++){
		emoLog[keys[l]] = 0;
	};
};

function Menu() {
	clickCount++;
	if(clickCount == 1) {
		document.getElementById("sideNav").style.display = "block";
	} else {
		document.getElementById("sideNav").style.display = "none";
		clickCount = 0;
	};
}

body.onclick = function() {
	if(clickCount == 1) {
		clickCount++;
	} else {
		clickCount = 2;
		Menu();
	}
}

btn.onclick = function () {
    if (btn.id == "start"){
        back = document.createElement("button");
        back.textContent = "<-- Back";
        back.id = "back";
        goBack();
        document.getElementById("QA").insertBefore(back, btn);
        btn = changeButton(btn, "next", "Next Question -->");    
		revealQ(i); 
    } else if (btn.id == "next") {
		i+=1;
        if (i < questions.length) {
            revealQ(i);
            if (i == (questions.length - 1)) {
                btn = changeButton(btn, "revealMood", "Reveal My Mood...");
            };            
		};
    } else if (btn.id == "revealMood"){
        var emoji;
        var message1 = "<h2>Your Mood:</h2>";
		var message2;
		var ans;
		var emoKey;
		var mood;
		for(var q = 0; q < answerLog.length; q++){
			ans = questions[q].Ops[answerLog[q]];
			emoKey = Object.keys(ans);
			for(var r = 1; r < emoKey.length; r++){
				emoLog[emoKey[r]] += ans[emoKey[r]];
			};
		};
        i+=1;
		btn.disabled = true;
		console.log(emoLog);
		mood = Object.keys(emoLog)[maxPlace(Object.values(emoLog))];
		emoji = "<img id = 'emoji' src =" + emoSource[mood] + ">";
		message2 = "<p>You are currently " + mood + "!</p>";
		document.getElementById("question").innerHTML = message1;
		document.getElementById("answer").innerHTML = emoji + message2;
    };
};

function goBack() {
    back.onclick = function() {
        i-=1;
        if (btn.id != "next" && i < questions.length - 1) {
            btn = changeButton(btn, "next", "Next Question -->");
        };
        btn.disabled = false;
		revealQ(i);
		Reset();
    };
};

// Fix mobil for Contact page.
// Create a "start over" button on final page.
// Access data externally from json file.
// Remove borders.